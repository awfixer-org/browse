<!DOCTYPE html>
<title>Test VideoFrame drawImage() with 0.5x scale performance</title>
<script src="../resources/runner.js"></script>
<script src="videoFrame-utils.js"></script>

<canvas id="canvas"></canvas>

<script>
(async function() {
  let frame = await createDecodedFrame();
  if (frame == null) {
    PerfTestRunner.logFatalError("No frame decoded");
    return;
  }

  const canvas = document.getElementById("canvas");
  canvas.width = frame.displayWidth / 2;
  canvas.height = frame.displayHeight / 2;

  const ctx = canvas.getContext("2d");

  PerfTestRunner.measureInnerRAFTime({
    description: "CPU time for drawImage() with 0.5x scale",
    run() {
      for (let i = 0; i < 10; i++) {
        ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
      }
    }
  });
})();
</script>
